# 화상진료 사용자 여정 스토리보드

**문서번호**: MPK-UX-SB-TELE-v1.0
**기준**: 원본 기획안 VII. 7.4절 원격진료 시나리오
**Phase**: Phase 3
**최종 갱신**: 2026-02-14

---

## 장면 1: 의료 서비스 진입 및 전문과 선택

### 와이어프레임
```
┌─────────────────────────────┐
│  ◀  의료 서비스              │
├─────────────────────────────┤
│ 🏥 원격 진료 예약            │
│                             │
│ 전문과를 선택하세요           │
│ ┌──────────┐ ┌──────────┐  │
│ │ 🩺       │ │ 🫀       │  │
│ │ 내과     │ │ 심장내과  │  │
│ │ 32명 대기│ │ 12명 대기 │  │
│ └──────────┘ └──────────┘  │
│ ┌──────────┐ ┌──────────┐  │
│ │ 🧬       │ │ 🧠       │  │
│ │ 내분비과  │ │ 신경과   │  │
│ │ 8명 대기  │ │ 5명 대기  │  │
│ └──────────┘ └──────────┘  │
│ ┌──────────┐ ┌──────────┐  │
│ │ 🦴       │ │ 👁️       │  │
│ │ 정형외과  │ │ 안과     │  │
│ │ 15명 대기 │ │ 10명 대기 │  │
│ └──────────┘ └──────────┘  │
├─────────────────────────────┤
│ 📋 최근 진료 기록             │
│ • 2026-02-10 내과 김OO 의사  │
│ • 2026-01-28 내분비과 이OO   │
├─────────────────────────────┤
│  🏠   📊   ⬡   🛒   ⚙️   │
└─────────────────────────────┘
```

### 인터랙션
- 전문과 카드: 탭 시 해당 과 의사 목록으로 이동
- 대기 인원: 실시간 업데이트 (SSE 또는 Kafka)
- 최근 진료 기록: 탭 시 진료 상세 보기

### 음성 안내 (TTS)
> "의료 서비스입니다. 원하시는 전문과를 선택하세요."

---

## 장면 2: 의사 프로필 확인 및 예약

### 와이어프레임
```
┌─────────────────────────────┐
│  ◀  내과 의사 목록           │
├─────────────────────────────┤
│ ┌─────────────────────────┐ │
│ │ [사진] 김민수 전문의      │ │
│ │ 서울대학교병원 내과       │ │
│ │ 전문분야: 당뇨, 대사증후군│ │
│ │ ⭐ 4.9 (156건 리뷰)     │ │
│ │ 📅 오늘 14:00, 15:30 가능│ │
│ │ [프로필 보기] [예약하기]  │ │
│ ├─────────────────────────┤ │
│ │ [사진] 이영희 전문의      │ │
│ │ 연세의료원 내과           │ │
│ │ 전문분야: 고혈압, 심혈관  │ │
│ │ ⭐ 4.7 (98건 리뷰)      │ │
│ │ 📅 내일 09:00, 10:30 가능│ │
│ │ [프로필 보기] [예약하기]  │ │
│ └─────────────────────────┘ │
├─────────────────────────────┤
│ 정렬: [평점순▼] 필터: [오늘] │
└─────────────────────────────┘
```

### 예약 바텀시트
```
┌─────────────────────────────┐
│ 예약 확인                    │
│                             │
│ 👨‍⚕️ 김민수 전문의            │
│ 📅 2026-02-14 (금) 14:00   │
│ 💰 진료비: ₩30,000         │
│                             │
│ ☑ 만파식 측정 데이터 공유 동의│
│   (최근 30일 측정 기록)       │
│ ☑ 개인정보 제3자 제공 동의   │
│                             │
│ [  예약 확정하기  ]          │
└─────────────────────────────┘
```

### 인터랙션
- ReservationService.CreateReservation RPC 호출
- 측정 데이터 공유 동의: 토글 on/off, 공유 범위 선택 가능
- 예약 확정 시: 캘린더 자동 등록 + 알림 설정 (10분 전)

### 에러 케이스
- 해당 시간 이미 예약됨: "선택하신 시간은 이미 예약되었습니다. 다른 시간을 선택해주세요."
- Clinical 등급 미달: "화상진료는 Clinical 구독 회원만 이용 가능합니다. [구독 업그레이드]"

---

## 장면 3: 진료 대기실

### 와이어프레임
```
┌─────────────────────────────┐
│        진료 대기실            │
├─────────────────────────────┤
│                             │
│    ⏱️ 예상 대기 시간: 3분    │
│                             │
│    [Breathing 애니메이션]     │
│    "잠시만 기다려주세요"       │
│                             │
├─────────────────────────────┤
│ 📋 공유될 측정 데이터 미리보기│
│ ┌─────────────────────────┐ │
│ │ 혈당 추이 (최근 30일)     │ │
│ │ ▁▂▃▄▅▆▇ 평균 108 mg/dL │ │
│ │                         │ │
│ │ 지질 패널 (최근 측정)     │ │
│ │ TC:195 TG:120 HDL:55    │ │
│ │                         │ │
│ │ AI 분석 요약              │ │
│ │ "전반적으로 양호하나       │ │
│ │  공복혈당 상승 추세 관찰"  │ │
│ └─────────────────────────┘ │
│                             │
│ 📷 카메라/마이크 테스트       │
│ [카메라 확인] [마이크 확인]   │
├─────────────────────────────┤
│ [   진료 취소   ]            │
└─────────────────────────────┘
```

### 인터랙션
- 대기 시간: 서버에서 실시간 업데이트
- 카메라/마이크 사전 테스트: 권한 확인 + 미리보기
- 측정 데이터: HealthRecordService에서 조회, 의사에게 자동 전송
- Breathing 애니메이션: Sanggam 디자인 시스템 적용

---

## 장면 4: WebRTC 화상진료 진행

### 와이어프레임
```
┌─────────────────────────────┐
│ ┌─────────────────────────┐ │
│ │                         │ │
│ │    [의사 영상 (메인)]     │ │
│ │                         │ │
│ │                    ┌──┐ │ │
│ │                    │나│ │ │
│ │                    └──┘ │ │
│ └─────────────────────────┘ │
│                             │
│ ⏱ 12:34 경과                │
│                             │
│ ┌─────────────────────────┐ │
│ │ 📊 실시간 데이터 패널     │ │
│ │ 혈당: 112 mg/dL ↑       │ │
│ │ 심박: 72 bpm ─          │ │
│ └─────────────────────────┘ │
│                             │
├─────────────────────────────┤
│ 🎤  📷  📊  💬  📎  🔴종료│
└─────────────────────────────┘
```

### 인터랙션
- 마이크 on/off: 탭 토글
- 카메라 on/off: 탭 토글, 전면/후면 전환
- 데이터 패널: 의사가 환자 측정 데이터를 실시간 조회
- 채팅: 텍스트 메시지 송수신 (영상 중 보조)
- 파일 첨부: 이미지, 문서 공유
- 종료: 진료 종료 확인 다이얼로그

### 에러 케이스 (재연결)
```
┌─────────────────────────────┐
│                             │
│    ⚠️ 연결이 끊어졌습니다     │
│                             │
│    자동 재연결 중... (3/5)   │
│    [===========      ] 60%  │
│                             │
│ [수동 재연결]  [진료 종료]    │
│                             │
└─────────────────────────────┘
```
- 자동 재연결: 최대 5회, 지수 백오프 (2초→4초→8초→16초→32초)
- 5회 실패 시: "연결을 복구할 수 없습니다. 의사에게 전화로 연결해드릴까요?"
- 영상 품질 저하 시: 해상도 자동 하향 (720p→480p→360p→오디오만)

---

## 장면 5: 진료 완료 및 처방전 확인

### 와이어프레임
```
┌─────────────────────────────┐
│        진료가 완료되었습니다   │
├─────────────────────────────┤
│                             │
│ 진료 요약                    │
│ ┌─────────────────────────┐ │
│ │ 👨‍⚕️ 김민수 전문의          │ │
│ │ 📅 2026-02-14 14:00~14:25│ │
│ │ 진단: 경계성 당뇨 관찰     │ │
│ │                         │ │
│ │ 의사 소견:                │ │
│ │ "공복혈당이 상승 추세를    │ │
│ │  보이고 있어 식이 조절과   │ │
│ │  운동이 필요합니다.        │ │
│ │  2주 후 재측정 권장."     │ │
│ └─────────────────────────┘ │
│                             │
│ 📋 처방전                    │
│ ┌─────────────────────────┐ │
│ │ Rx-2026-0214-001        │ │
│ │ 1. 메트포르민 500mg      │ │
│ │    1일 2회, 30일분       │ │
│ │ 2. 혈당 측정 카트리지     │ │
│ │    1일 1회 측정 권장      │ │
│ │                         │ │
│ │ [처방전 PDF 다운로드]     │ │
│ │ [약국으로 전송]           │ │
│ └─────────────────────────┘ │
│                             │
│ [리뷰 작성] [다음 예약하기]   │
├─────────────────────────────┤
│  🏠   📊   ⬡   🛒   ⚙️   │
└─────────────────────────────┘
```

### 인터랙션
- PrescriptionService.GetPrescription RPC로 처방 정보 조회
- PDF 다운로드: 처방전 PDF 생성 및 저장
- 약국 전송: 근처 약국 검색 + 처방전 전자 전송
- 리뷰 작성: 별점 + 텍스트 리뷰

### 음성 안내 (TTS)
> "진료가 완료되었습니다. 처방전을 확인하시고 약국으로 전송하실 수 있습니다."

---

## 장면 6: 약국 연동 및 후속 관리

### 와이어프레임
```
┌─────────────────────────────┐
│  ◀  약국 검색                │
├─────────────────────────────┤
│ ┌─────────────────────────┐ │
│ │     [지도 뷰]            │ │
│ │   📍현위치               │ │
│ │        🏪 A약국 300m     │ │
│ │     🏪 B약국 500m        │ │
│ │          🏪 C약국 800m   │ │
│ └─────────────────────────┘ │
│                             │
│ A약국 (300m)                │
│ 영업시간: 09:00~22:00 ✅영업중│
│ [처방전 전송] [전화하기]      │
│                             │
│ ──── 후속 관리 일정 ────     │
│ 📅 2026-02-28 혈당 재측정    │
│ 📅 2026-03-14 재진료 예약    │
│                             │
│ 💊 복약 알림 설정             │
│ ☑ 메트포르민 08:00, 20:00   │
│ [알림 설정 완료]              │
└─────────────────────────────┘
```

### 인터랙션
- 약국 검색: GPS 기반 근처 약국 표시
- 처방전 전송: 전자처방전 API 연동
- 후속 일정: 캘린더 자동 등록
- 복약 알림: NotificationService 로컬 알림 설정

---

## 접근성 고려사항
- 화상진료 화면: 자막 지원 (STT → 실시간 자막)
- 대기 시간 스크린리더 안내: "예상 대기 시간 3분"
- 종료 버튼: 빨간색 + "진료 종료" 텍스트 라벨 필수
- 최소 터치 영역: 모든 버튼 48×48dp

## 참조
- 원본 기획안 VII. 7.4절
- `docs/ux/sitemap.md` /medical 라우트
- `backend/shared/proto/manpasik.proto` TelemedicineService, ReservationService, PrescriptionService
