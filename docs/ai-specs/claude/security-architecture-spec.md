# 보안 아키텍처 설계 스펙 (Claude용)

## 프로젝트 정보

- **프로젝트명**: ManPaSik (만파식) Healthcare Ecosystem
- **보안 등급**: 의료기기 수준 (HIPAA, GDPR 준수)
- **아키텍처**: MSA on Kubernetes

---

## 분석 요청 사항

### 1. 인증/인가 아키텍처 검토

**현재 설계:**
- Keycloak (OIDC/OAuth2.0)
- JWT 토큰 (Access + Refresh)
- RBAC + ABAC 하이브리드

**검토 필요:**
- MFA 구현 방식 (TOTP, SMS, 생체인식)
- 세션 관리 정책
- 토큰 수명주기
- 권한 에스컬레이션 방지

---

### 2. 데이터 암호화 전략

**현재 설계:**

| 데이터 상태 | 암호화 방식 | 키 관리 |
|-------------|-------------|---------|
| 저장 (at rest) | AES-256-GCM | AWS KMS / HashiCorp Vault |
| 전송 (in transit) | TLS 1.3 | 인증서 자동 갱신 |
| 클라이언트 | AES-256 (로컬) | 디바이스 키체인 |

**검토 필요:**
- 키 로테이션 정책
- 키 복구 프로세스
- E2E 암호화 범위 결정
- 양자내성 암호화 준비

---

### 3. API 보안

**현재 설계:**
- Kong API Gateway (레이트리밋, 인증)
- gRPC + TLS (서비스간 통신)
- mTLS (Kubernetes 내부)

**검토 필요:**
- API 스로틀링 정책
- DDoS 방어 전략
- 입력 검증 체계
- SQL Injection / XSS 방지

---

### 4. 의료기기 특화 보안

**BLE 통신 보안:**
```
리더기 ←→ 앱
  - BLE 5.0 Secure Connections
  - ECDH 키 교환
  - AES-CCM 암호화
```

**NFC 카트리지 보안:**
```
- ISO 14443A + MIFARE DESFire
- 암호화된 보정 데이터
- 위변조 방지 해시
```

**검토 필요:**
- 펌웨어 서명 및 검증
- OTA 업데이트 보안
- 물리적 탬퍼링 대응

---

### 5. 해시체인 무결성

**현재 설계:**
```
측정 데이터 → SHA-256 해시 → 이전 해시와 연결 → 체인 저장
```

**검토 필요:**
- 체인 구조 타당성
- 변조 탐지 메커니즘
- 감사 로그 보존 기간
- 법적 증거력 확보 방안

---

### 6. 개인정보 보호 기술 (PETs)

**검토 필요 기술:**
- 차분 프라이버시 (Differential Privacy)
- 연합학습 보안 (Secure Aggregation)
- 동형암호 적용 가능성
- 데이터 익명화/가명처리

---

### 7. 침해사고 대응

**검토 필요:**
- 탐지 메커니즘 (SIEM, IDS)
- 대응 절차 (Playbook)
- 복구 계획 (RTO, RPO)
- 규제 보고 요건

---

## 산출물 요청

1. **보안 아키텍처 다이어그램** (검토/보완)
2. **위협 모델링 결과** (STRIDE 분석)
3. **암호화 정책 문서**
4. **접근제어 매트릭스**
5. **침해사고 대응 계획**

---

**작성자**: Antigravity (Gemini)
**작성일**: 2026-02-09
