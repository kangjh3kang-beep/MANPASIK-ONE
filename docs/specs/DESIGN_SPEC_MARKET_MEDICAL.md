# DESIGN_SPEC_MARKET_MEDICAL.md

**ë¬¸ì„œë²ˆí˜¸**: MPK-SPEC-MARKET-MED-v1.0
**ì‘ì„±ì¼**: 2026-02-18
**ë°©í–¥ì„±**: "ë””ìì¸ì€ ì§ì ‘(Antigravity), êµ¬í˜„ì€ í´ë¡œë“œ"

---

## I. Market Expansion â€” íƒ­ êµ¬ì¡°(Tab Architecture) + ì¼ë°˜ ìƒí’ˆ ì¹´ë“œ

### 1.1 íƒ­ ì•„í‚¤í…ì²˜

í˜„ì¬ MarketScreenì€ ì¹´íŠ¸ë¦¬ì§€ ì „ìš© ê·¸ë¦¬ë“œë§Œ ì œê³µ. ìŠ¤í† ë¦¬ë³´ë“œ(storyboard-market-purchase.md)ì— ë”°ë¼ 3ê°œ íƒ­ìœ¼ë¡œ í™•ì¥:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cartridge Market          ğŸ” ğŸ›’â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ì¹´íŠ¸ë¦¬ì§€]  [ì¼ë°˜ìƒí’ˆ]  [êµ¬ë…]   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  (ì„ íƒ íƒ­ ì½˜í…ì¸ )               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| íƒ­ ì¸ë±ìŠ¤ | íƒ­ëª… | ì½˜í…ì¸  | ë¼ìš°íŠ¸ |
|-----------|------|--------|--------|
| 0 | ì¹´íŠ¸ë¦¬ì§€ | ê¸°ì¡´ `_buildTierFilter()` + `_buildProductGrid()` | `/market` (ê¸°ë³¸) |
| 1 | ì¼ë°˜ìƒí’ˆ | ê±´ê°•ì‹í’ˆ/ì›°ë¹™ìš©í’ˆ/ì•¡ì„¸ì„œë¦¬ ìƒí’ˆ ê·¸ë¦¬ë“œ | `/market?tab=general` |
| 2 | êµ¬ë… | `SubscriptionScreen` inline or êµ¬ë… í”Œëœ ì¹´ë“œ | `/market?tab=subscription` |

### 1.2 ì¼ë°˜ ìƒí’ˆ ì¹´ë“œ (General Product Card) UI ìŠ¤í™

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   [ìƒí’ˆ ì´ë¯¸ì§€]     â”‚  â”‚
â”‚  â”‚   í”Œë ˆì´ìŠ¤í™€ë”      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â™¥  (ì°œ)               â”‚
â”‚                         â”‚
â”‚  ê±´ê°• ë³´ì¡° ì‹í’ˆ A        â”‚
â”‚  â˜…â˜…â˜…â˜…â˜† 4.2 (128)       â”‚
â”‚                         â”‚
â”‚  â‚©29,900               â”‚
â”‚  ë¬´ë£Œ ë°°ì†¡               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**GeneralProductCard ì†ì„±:**
- `imageUrl` (String?) â€” ìƒí’ˆ ì´ë¯¸ì§€ URL. null ì‹œ ì¹´í…Œê³ ë¦¬ë³„ ì•„ì´ì½˜ í”Œë ˆì´ìŠ¤í™€ë”
- `name` (String) â€” ìƒí’ˆëª…
- `price` (int) â€” ê°€ê²© (ì›)
- `originalPrice` (int?) â€” í• ì¸ ì „ ê°€ê²© (ì·¨ì†Œì„  í‘œì‹œ)
- `rating` (double) â€” í‰ì  (0~5)
- `reviewCount` (int) â€” ë¦¬ë·° ìˆ˜
- `freeShipping` (bool) â€” ë¬´ë£Œ ë°°ì†¡ ì—¬ë¶€
- `category` (String) â€” ì¹´í…Œê³ ë¦¬ (supplement/wellness/accessory)
- `isWishlisted` (bool) â€” ì°œ ìƒíƒœ

**ìƒ‰ìƒ/ìŠ¤íƒ€ì¼:**
- ë°°ê²½: `PorcelainContainer` (ë°±ì ëŠë‚Œ, ê¸°ì¡´ ìœ„ì ¯ ì¬ì‚¬ìš©)
- ê°€ê²©: Sanggam Gold `#D4AF37`
- í• ì¸: ì›ê°€ ì·¨ì†Œì„  + "N% OFF" ë¹¨ê°„ ë±ƒì§€
- ë³„ì : ê³¨ë“œ `Icons.star` + íšŒìƒ‰ `Icons.star_border`

### 1.3 ì¹´í…Œê³ ë¦¬ í•„í„° (ì¼ë°˜ìƒí’ˆ íƒ­)

```
[ì „ì²´] [ê±´ê°•ì‹í’ˆ] [ì›°ë¹™ìš©í’ˆ] [ë¦¬ë”ê¸° ì•¡ì„¸ì„œë¦¬] [ì„ ë¬¼ì„¸íŠ¸]
```

---

## II. Medical Dashboard â€” 'ë””ì§€í„¸ ë³‘ì›' ì»¨ì…‰

### 2.1 íˆì–´ë¡œ ì¹´ë“œ (Hero Health Card)

í˜„ì¬ `MedicalScreen`ì€ ë‹¨ìˆœ ë¦¬ìŠ¤íŠ¸. 'ë””ì§€í„¸ ë³‘ì›' ì»¨ì…‰ì˜ íˆì–´ë¡œ ì¹´ë“œë¡œ ì¬êµ¬ì„±:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€ íˆì–´ë¡œ ì¹´ë“œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚ â”‚
â”‚  â”‚  â•‘  ğŸ¥ ë””ì§€í„¸ ë³‘ì›        â•‘ â”‚ â”‚
â”‚  â”‚  â•‘                       â•‘ â”‚ â”‚
â”‚  â”‚  â•‘  ê±´ê°• ì ìˆ˜             â•‘ â”‚ â”‚
â”‚  â”‚  â•‘  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘  87/100  â•‘ â”‚ â”‚
â”‚  â”‚  â•‘                       â•‘ â”‚ â”‚
â”‚  â”‚  â•‘  ë§ˆì§€ë§‰ ì§„ë£Œ: 2ì£¼ ì „    â•‘ â”‚ â”‚
â”‚  â”‚  â•‘  ë‹¤ìŒ ì˜ˆì•½: 3/5 14:00  â•‘ â”‚ â”‚
â”‚  â”‚  â•‘                       â•‘ â”‚ â”‚
â”‚  â”‚  â•‘  [ ë¹ ë¥¸ ì§„ë£Œ ì˜ˆì•½ ]    â•‘ â”‚ â”‚
â”‚  â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚
â”‚  ë¹ ë¥¸ ì„œë¹„ìŠ¤                     â”‚
â”‚  [ë¹„ëŒ€ë©´ ì§„ë£Œ] [ë³‘ì› ì°¾ê¸°]       â”‚
â”‚  [ì²˜ë°©ì „ ì¡°íšŒ] [ê±´ê°• ë¦¬í¬íŠ¸]     â”‚
â”‚                                 â”‚
â”‚  ì¶”ì²œ ì˜ì‚¬                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ‘¨â€âš•ï¸  â”‚ â”‚ ğŸ‘©â€âš•ï¸  â”‚ â”‚ ğŸ‘¨â€âš•ï¸  â”‚   â”‚
â”‚  â”‚ ê¹€OO â”‚ â”‚ ì´OO â”‚ â”‚ ë°•OO â”‚   â”‚
â”‚  â”‚ ë‚´ê³¼ â”‚ â”‚ í”¼ë¶€ â”‚ â”‚ ì •ì‹  â”‚   â”‚
â”‚  â”‚ â˜…4.8 â”‚ â”‚ â˜…4.9 â”‚ â”‚ â˜…4.7 â”‚   â”‚
â”‚  â”‚ì˜ˆì•½ê°€ëŠ¥â”‚ â”‚ì§„ë£Œì¤‘ â”‚ â”‚ì˜ˆì•½ê°€ëŠ¥â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 íˆì–´ë¡œ ì¹´ë“œ UI ìŠ¤í™

**ê·¸ë˜ë””ì–¸íŠ¸:** `LinearGradient(colors: [#1A237E, #0D47A1])` (ë””ì§€í„¸ ë¸”ë£¨)
**í…Œë‘ë¦¬:** `OrnateGoldFrame` ë˜ëŠ” `border: Border.all(color: sanggamGold.withOpacity(0.3))`
**êµ¬ì„±ìš”ì†Œ:**
1. **ì œëª©**: "ë””ì§€í„¸ ë³‘ì›" + ë³‘ì› ì•„ì´ì½˜
2. **ê±´ê°• ì ìˆ˜ ë°”**: `LinearProgressIndicator` + ì ìˆ˜ í…ìŠ¤íŠ¸ (AI ì½”ì¹˜ í—¬ìŠ¤ ìŠ¤ì½”ì–´ ì—°ë™)
3. **ë§ˆì§€ë§‰ ì§„ë£Œì¼**: ìµœê·¼ ì™„ë£Œëœ ì˜ˆì•½ì˜ scheduledAt
4. **ë‹¤ìŒ ì˜ˆì•½**: ë‹¤ê°€ì˜¤ëŠ” ì˜ˆì•½ í‘œì‹œ, ì—†ìœ¼ë©´ "ì˜ˆì•½ ì—†ìŒ"
5. **CTA ë²„íŠ¼**: "ë¹ ë¥¸ ì§„ë£Œ ì˜ˆì•½" â†’ `/medical/telemedicine`

### 2.3 ì¶”ì²œ ì˜ì‚¬ ëª©ë¡ (Horizontal Scroll)

```dart
class DoctorCard {
  final String doctorId;
  final String name;
  final String specialty;
  final double rating;
  final int reviewCount;
  final String? avatarUrl;
  final bool isAvailable;     // í˜„ì¬ ì˜ˆì•½ ê°€ëŠ¥ ì—¬ë¶€
  final String? nextSlot;     // "ì˜¤ëŠ˜ 15:00" ë“±
}
```

**ì¹´ë“œ ìŠ¤íƒ€ì¼:**
- ì‚¬ì´ì¦ˆ: 120Ã—160
- ì•„ë°”íƒ€: 64Ã—64 CircleAvatar (ì´ë¯¸ì§€ ì—†ìœ¼ë©´ ì´ë‹ˆì…œ)
- ì´ë¦„: bold, 14sp
- ì§„ë£Œê³¼: caption, 12sp, ì„œë¸Œ ì»¬ëŸ¬
- ë³„ì : ì‘ì€ star + í…ìŠ¤íŠ¸
- ìƒíƒœ ë±ƒì§€: "ì˜ˆì•½ ê°€ëŠ¥" (ì´ˆë¡) / "ì§„ë£Œ ì¤‘" (ì£¼í™©) / "ì˜¤ëŠ˜ ë§ˆê°" (ë¹¨ê°„)

### 2.4 ì„œë¹„ìŠ¤ ê·¸ë¦¬ë“œ ë¦¬íŒ©í† ë§

í˜„ì¬ 2Ã—2 GridView â†’ ê°€ë¡œ ìŠ¤í¬ë¡¤ ì„œë¹„ìŠ¤ ì¹©ìœ¼ë¡œ ë³€ê²½:

```
[ğŸ¥ ë¹„ëŒ€ë©´ì§„ë£Œ] [ğŸ¥ ë³‘ì›ì°¾ê¸°] [ğŸ’Š ì²˜ë°©ì „] [ğŸ“Š ë¦¬í¬íŠ¸] [ğŸš¨ ì‘ê¸‰]
```

---

## III. Video Call HUD â€” ìƒì²´ ë°ì´í„° ì˜¤ë²„ë ˆì´

### 3.1 ì˜¤ë²„ë ˆì´ êµ¬ì¡°

í™”ìƒ ì§„ë£Œ ì¤‘ í™˜ìì˜ ìµœê·¼ ìƒì²´ ë°ì´í„°ë¥¼ ì˜¤ë²„ë ˆì´ë¡œ í‘œì‹œ:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â— í†µí™” ì¤‘  02:34          [PIP]â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€ ë°”ì´íƒˆ HUD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â¤ï¸ 72 bpm  â”‚ ğŸ« SpOâ‚‚ 98% â”‚  â”‚
â”‚  â”‚ ğŸ©¸ 120/80  â”‚ ğŸŒ¡ 36.5Â°C   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚
â”‚        [ì›ê²© ë¹„ë””ì˜¤ ì˜ì—­]        â”‚
â”‚                                 â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€ AI ë¶„ì„ íŒì—… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ’¡ í˜ˆì••ì´ ì •ìƒ ë²”ìœ„ì…ë‹ˆë‹¤.  â”‚  â”‚
â”‚  â”‚   ìµœê·¼ 7ì¼ í‰ê· : 118/78    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚
â”‚  [ğŸ”‡] [ğŸ“¹] [ğŸ“ ì¢…ë£Œ] [ğŸ”Š] [ğŸ’¬] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 HUD ìœ„ì ¯ ìŠ¤í™

**`VitalSignsHud` ìœ„ì ¯:**

```dart
class VitalSignsHud extends StatelessWidget {
  final int? heartRate;        // bpm
  final int? spO2;             // %
  final String? bloodPressure; // "120/80"
  final double? temperature;   // Â°C
  final String? aiInsight;     // AI í•œì¤„ ì¸ì‚¬ì´íŠ¸
}
```

**ë°°ì¹˜:**
- ìœ„ì¹˜: í™”ë©´ ìƒë‹¨ ì™¼ìª½ (í†µí™” ìƒíƒœ ì•„ë˜)
- ë°°ê²½: `Colors.black.withOpacity(0.6)` ë°˜íˆ¬ëª…
- í…Œë‘ë¦¬: `BorderRadius.circular(12)`
- í•­ëª©: 2Ã—2 ê·¸ë¦¬ë“œ (ì‹¬ë°•/ì‚°ì†Œí¬í™”ë„/í˜ˆì••/ì²´ì˜¨)
- ê° í•­ëª©: ì•„ì´ì½˜ + ìˆ˜ì¹˜ + ë‹¨ìœ„

**ë°ì´í„° ì†ŒìŠ¤:**
- `ref.watch(latestVitalsProvider)` â€” ìµœê·¼ ì¸¡ì • ë°ì´í„°ì—ì„œ ë°”ì´íƒˆ ì¶”ì¶œ
- ë°ì´í„° ì—†ìœ¼ë©´ "--" í‘œì‹œ
- 3ì´ˆë§ˆë‹¤ ê°±ì‹  (Timer)

**AI ì¸ì‚¬ì´íŠ¸ íŒì—…:**
- ìœ„ì¹˜: í•˜ë‹¨ ì»¨íŠ¸ë¡¤ ë°” ìœ„
- 5ì´ˆê°„ í‘œì‹œ í›„ ìë™ fade-out
- ì¸¡ì • ë°ì´í„° ê¸°ë°˜ ê°„ë‹¨ ì½”ë©˜íŠ¸ (ì •ìƒ/ì£¼ì˜/ìœ„í—˜)

### 3.3 í† ê¸€ ë™ì‘

- HUD í‘œì‹œ/ìˆ¨ê¸°ê¸°: ì˜ìƒ ì˜ì—­ íƒ­ ì‹œ í† ê¸€ (3ì´ˆ í›„ ìë™ ìˆ¨ê¹€)
- í•­ìƒ í‘œì‹œ ëª¨ë“œ: ì„¤ì •ì—ì„œ ë³€ê²½ ê°€ëŠ¥ (`_showVitalsHud` ìƒíƒœ)

---

## IV. ëˆ„ë½ ê¸°ëŠ¥ ë³´ì™„ ëª©ë¡

### 4.1 ëŒ“ê¸€ ì‹œìŠ¤í…œ (ì»¤ë®¤ë‹ˆí‹°)

í˜„ì¬ `createComment()` â†’ `UnimplementedError`. REST ì—°ë™ í•„ìš”:

```dart
// community_repository_rest.dart
Future<Comment> createComment(String postId, String content) async {
  final res = await _client.createComment(postId, content: content);
  return Comment.fromJson(res);
}

Future<List<Comment>> getComments(String postId) async {
  final res = await _client.getComments(postId);
  return (res['comments'] as List).map((e) => Comment.fromJson(e)).toList();
}
```

### 4.2 ì²˜ë°©ì „ â†’ ì•½êµ­ ì „ì†¡ (Flutter ë ˆì´ì–´)

```dart
// medical_repository.dart ì¶”ê°€
Future<bool> sendPrescriptionToPharmacy(String prescriptionId, String pharmacyId);
```

### 4.3 ì˜ì‚¬ ê°€ìš©ì„± í™•ì¸ (Flutter ë ˆì´ì–´)

```dart
// medical_repository.dart ì¶”ê°€
Future<List<TimeSlot>> getDoctorAvailability(String doctorId);
Future<void> selectDoctor(String reservationId, String doctorId);
```

---

## V. êµ¬í˜„ ìˆœì„œ

| ìˆœë²ˆ | í•­ëª© | ì˜ˆìƒ ê·œëª¨ | ìš°ì„ ìˆœìœ„ |
|------|------|----------|---------|
| 1 | Market íƒ­ ì•„í‚¤í…ì²˜ + ì¼ë°˜ìƒí’ˆ ì¹´ë“œ | ~150ì¤„ | P1 |
| 2 | Medical íˆì–´ë¡œ ì¹´ë“œ + ì¶”ì²œ ì˜ì‚¬ | ~200ì¤„ | P1 |
| 3 | Video Call HUD (VitalSignsHud) | ~150ì¤„ | P1 |
| 4 | ëŒ“ê¸€ ì‹œìŠ¤í…œ REST ì—°ë™ | ~60ì¤„ | P2 |
| 5 | ì²˜ë°©ì „ ì•½êµ­ ì „ì†¡ ì—°ë™ | ~40ì¤„ | P2 |
| 6 | ì˜ì‚¬ ê°€ìš©ì„± + ì„ íƒ | ~80ì¤„ | P2 |

---

**ì°¸ì¡°**: storyboard-market-purchase.md, storyboard-telemedicine.md, agent-work-orders-v1.0.md Task A-1/A-2/B-1
